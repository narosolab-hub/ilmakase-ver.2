# 일마카세 아카이브 MVP
## PRD (Product Requirements Document) & 기능명세서

---

# Part 1: PRD (Product Requirements Document)

## 1. 제품 개요

### 제품명
일마카세 아카이브 (ILMAKASE Archive) MVP

### 제품 비전
매일의 업무 기록이 자동으로 포트폴리오가 되는 경험을 제공하여, 사용자가 "내 경험이 자산이 되는 느낌"을 받게 만든다.

### MVP 목표
**"사용자가 '아, 이거 계속 써야겠다'고 느끼게 만들기"**

검증할 가설:
1. 사람들이 정말 매일 기록을 할까?
2. 기록 → '쓸 수 있는 결과물'로 바뀌는 경험이 통할까?

### 타겟 사용자 (MVP)
- **1차**: 주니어 직장인 (2-6년차)
- **페르소나**: 김주니 (28세, 4년차 마케터, 사수 없이 혼자 일함, 이직 준비 중)

### 성공 지표
- 첫 기록 작성률: 80%
- 7일 유지율: 30%
- 첫 카드 생성률: 50%
- 30일 유지율: 20%

---

## 2. 핵심 기능 (MVP Scope)

### In Scope (반드시 포함)
✅ 회원가입/로그인 (이메일 또는 소셜)  
✅ 온보딩 플로우 (5개 질문)  
✅ 일일 업무 기록 작성  
✅ 일마카세 프롬프트 (매일 랜덤 질문)  
✅ 기록 목록 조회  
✅ AI 자동 분석 (3-5개 기록 시)  
✅ 포트폴리오 카드 자동 생성 (5개 기록 시)  
✅ 카드 다운로드 (PNG)  

### Out of Scope (MVP 이후)
❌ 음성 메모 (STT)  
❌ 외부 연동 (슬랙/노션)  
❌ 다양한 템플릿  
❌ 카드 커스터마이징  
❌ 성장 곡선 시각화  
❌ 팀 협업 기능  
❌ 유료 결제 기능  
❌ 취준생 기능 (직무 매칭)  

---

## 3. 사용자 플로우

### 전체 플로우
```
회원가입 → 온보딩 (5개 질문) → 첫 기록 작성 
→ 즉시 미리보기 → 계속 기록 
→ (3개 쌓임) AI 패턴 분석 
→ (5개 쌓임) 카드 자동 생성 
→ 카드 다운로드
```

### 상세 플로우

#### 플로우 1: 회원가입 & 온보딩
```
1. 랜딩페이지 진입
2. "시작하기" 클릭
3. 회원가입 (이메일 or Google)
4. 온보딩 Q1: 상황 선택
5. 온보딩 Q2: 하는 일 입력
6. 온보딩 Q3: 기록 이유 선택
7. 온보딩 Q4: 시간 선택
8. 온보딩 Q5: 공감 문구 선택
9. 온보딩 완료 멘트
10. 첫 기록 화면 진입
```

#### 플로우 2: 기록 작성
```
1. "오늘 기록하기" 클릭
2. 자유 텍스트 입력
3. (선택) 일마카세 프롬프트 확인
4. "저장하기" 클릭
5. 저장 완료 + 즉시 미리보기 표시
6. 홈으로 돌아가기
```

#### 플로우 3: AI 분석 (3개 기록 시)
```
1. 기록 3개 쌓임 (자동 감지)
2. 백그라운드에서 AI 분석 실행
3. 홈 화면에 "패턴 발견" 알림
4. 사용자가 알림 클릭
5. AI 분석 결과 표시
   - 업무 패턴
   - 주요 키워드
   - 업무 흐름
   - 인사이트 한 줄
```

#### 플로우 4: 카드 생성 (5개 기록 시)
```
1. 기록 5개 쌓임 (자동 감지)
2. 백그라운드에서 카드 생성
3. "프로젝트 카드 완성!" 알림
4. 사용자가 알림 클릭
5. 생성된 카드 표시
6. "다운로드" 또는 "더 만들기" 선택
```

---

## 4. 화면 정의

### 필수 화면 (총 6개)

#### 1. 랜딩/로그인 화면
- 서비스 소개 (한 줄)
- "시작하기" 버튼
- "이미 계정이 있나요?" 로그인 링크

#### 2. 온보딩 화면 (5개 스텝)
- 프로그레스 바 (1/5, 2/5...)
- 질문 + 선택지
- "다음" 버튼
- 마지막 스텝: "시작하기" 멘트

#### 3. 홈 화면
- 상단: 현재 상태 요약
  - 기록한 날
  - 발견된 프로젝트
  - 다음 카드까지 필요한 기록 수
- 중간: 최근 기록 목록 (카드 형태)
- 하단: "오늘 기록하기" 플로팅 버튼

#### 4. 기록 작성 화면
- 제목: "오늘의 일마카세"
- 안내 문구: "오늘 뭐 했어요? 생각난 대로 적어주세요."
- 자유 텍스트 입력 (멀티라인)
- 일마카세 프롬프트 (접었다 폈다 가능)
- 하단: "저장하기" / "나중에" 버튼

#### 5. 기록 상세 화면
- 날짜
- 작성한 내용
- (3개 이후) AI 분석 결과
- 수정/삭제 버튼

#### 6. 프로젝트 카드 화면
- 생성된 카드 이미지
- 카드 내용:
  - 프로젝트명
  - 기간
  - 내가 한 일
  - 결과
  - 사고 방식 요약
- "다운로드" / "더 만들기" 버튼

---

## 5. 기술 요구사항

### 프론트엔드
- **프레임워크**: React + TypeScript
- **스타일링**: Tailwind CSS
- **라우팅**: React Router
- **상태관리**: React Context API (간단하게)
- **폼 관리**: React Hook Form
- **반응형**: 모바일 우선

### 백엔드
- **인증/DB**: Supabase
  - Authentication (Email + Google OAuth)
  - PostgreSQL Database
  - Storage (카드 이미지 저장)
- **AI**: OpenAI API (GPT-4)
  - 텍스트 분석
  - 카드 생성

### 배포
- **프론트엔드**: Vercel
- **도메인**: ilmakase.com (또는 서브도메인)

### 외부 서비스
- **이메일**: Supabase Auth (기본)
- **이미지 생성**: HTML to Image (카드 다운로드용)

---

## 6. 데이터 모델

### User (사용자)
```typescript
{
  id: string (UUID)
  email: string
  name?: string
  created_at: timestamp
  
  // 온보딩 정보
  situation: 'working' | 'job_seeking' | 'freelance'
  main_work: string
  record_reason: string
  time_preference: '3min' | '5min' | 'flexible'
  emotional_phrase: string
}
```

### Record (기록)
```typescript
{
  id: string (UUID)
  user_id: string (FK)
  content: string (텍스트 내용)
  date: date
  created_at: timestamp
  
  // AI 추출 정보
  keywords?: string[] (자동 추출된 키워드)
  project_id?: string (자동 매칭된 프로젝트)
}
```

### AIAnalysis (AI 분석)
```typescript
{
  id: string (UUID)
  user_id: string (FK)
  record_ids: string[] (분석에 사용된 기록들)
  
  // 분석 결과
  pattern: string (발견된 패턴)
  workflow: string (업무 흐름)
  top_keywords: string[] (주요 키워드)
  insight: string (인사이트 한 줄)
  
  created_at: timestamp
}
```

### ProjectCard (프로젝트 카드)
```typescript
{
  id: string (UUID)
  user_id: string (FK)
  record_ids: string[] (카드에 포함된 기록들)
  
  // 카드 내용
  title: string (프로젝트명)
  period_start: date
  period_end: date
  tasks: string[] (내가 한 일)
  results: string[] (결과)
  thinking_summary: string (사고 방식 요약)
  
  // 카드 이미지
  image_url?: string
  
  created_at: timestamp
}
```

---

## 7. API 엔드포인트

### 인증
- `POST /auth/signup` - 회원가입
- `POST /auth/login` - 로그인
- `POST /auth/logout` - 로그아웃
- `GET /auth/me` - 현재 사용자 정보

### 온보딩
- `PUT /users/onboarding` - 온보딩 정보 저장

### 기록
- `GET /records` - 기록 목록 조회
- `GET /records/:id` - 기록 상세 조회
- `POST /records` - 기록 작성
- `PUT /records/:id` - 기록 수정
- `DELETE /records/:id` - 기록 삭제

### AI 분석
- `POST /ai/analyze` - AI 분석 실행 (3개 기록 시)
- `GET /ai/analyses` - 분석 결과 목록

### 프로젝트 카드
- `POST /cards/generate` - 카드 생성 (5개 기록 시)
- `GET /cards` - 카드 목록 조회
- `GET /cards/:id` - 카드 상세 조회
- `GET /cards/:id/download` - 카드 이미지 다운로드

---

## 8. AI 프롬프트 설계

### 프롬프트 1: 기록 1개 → 즉시 미리보기

**Input**: 사용자 기록 1개

**Prompt**:
```
당신은 업무 포트폴리오 전문가입니다.
사용자가 작성한 업무 기록을 분석하여, 
이 기록이 포트폴리오에서 어떻게 활용될 수 있는지 
간단히 보여주세요.

사용자 기록:
"{record_content}"

다음 형식으로 응답해주세요:
1. 제목 (6-10단어)
2. 핵심 행동 (2-3개 불릿포인트)
3. 사고 방식 (한 문장)

간결하고 명확하게 작성해주세요.
```

**Output**:
```json
{
  "title": "데이터 기반 타겟 재설정",
  "actions": [
    "GA 데이터 분석을 통해 기존 타겟 가정 재검증",
    "데이터 인사이트를 바탕으로 타겟 연령대 조정 결정"
  ],
  "thinking": "예상과 다른 데이터를 발견했을 때, 즉시 가정을 재검토하고 방향을 수정하는 유연한 접근"
}
```

---

### 프롬프트 2: 기록 3-5개 → AI 분석

**Input**: 사용자 기록 3-5개

**Prompt**:
```
당신은 업무 패턴 분석 전문가입니다.
사용자가 작성한 여러 업무 기록을 분석하여,
업무 패턴, 흐름, 키워드, 인사이트를 도출해주세요.

기록들:
{records.map(r => `[${r.date}] ${r.content}`).join('\n\n')}

다음 형식으로 응답해주세요:
1. pattern: 반복되는 업무 패턴 (1-2문장)
2. workflow: 업무를 진행하는 흐름/순서 (1-2문장)
3. keywords: 자주 등장하는 키워드 (3-5개)
4. insight: 이 사람의 업무 스타일 인사이트 (1문장)

친근하고 격려하는 톤으로 작성해주세요.
```

**Output**:
```json
{
  "pattern": "신규 캠페인 관련 업무가 반복적으로 기록되고 있어요.",
  "workflow": "데이터 분석 → 가설 설정 → 테스트 → 수정, 이런 순서로 진행하시는 것 같아요.",
  "keywords": ["타겟분석", "전환율", "AB테스트", "데이터", "가설"],
  "insight": "데이터를 기반으로 의사결정하는 스타일이네요!"
}
```

---

### 프롬프트 3: 기록 5개+ → 프로젝트 카드 생성

**Input**: 사용자 기록 5개 이상

**Prompt**:
```
당신은 포트폴리오 작성 전문가입니다.
사용자의 업무 기록들을 분석하여,
하나의 프로젝트로 묶고 포트폴리오 카드를 생성해주세요.

기록들:
{records.map(r => `[${r.date}] ${r.content}`).join('\n\n')}

다음 형식으로 응답해주세요 (JSON):
{
  "title": "프로젝트명 (6-12단어)",
  "tasks": ["내가 한 일 1", "내가 한 일 2", "내가 한 일 3"],
  "results": ["결과 1", "결과 2"] (구체적 수치 포함 시 포함),
  "thinking_summary": "사고 방식 한 줄 요약 (30-50단어)"
}

규칙:
- tasks는 행동 중심으로 작성 ("~를 분석했다", "~를 개선했다")
- results는 정량적 결과 우선, 없으면 정성적 결과
- thinking_summary는 "어떻게 생각해서" 이런 결과를 냈는지 강조
- 전문적이지만 이해하기 쉬운 언어 사용
```

**Output**:
```json
{
  "title": "신규 마케팅 캠페인 기획",
  "tasks": [
    "타겟 분석을 통해 주요 고객군 정의",
    "데이터 기반으로 메시지 A/B 테스트 진행",
    "테스트 결과를 바탕으로 최종 메시지 선정"
  ],
  "results": [
    "전환율 약 15% 개선"
  ],
  "thinking_summary": "데이터를 기준으로 가설을 세우고, 검증을 통해 방향을 좁혀가는 방식으로 일했습니다."
}
```

---

## 9. 비기능 요구사항

### 성능
- 기록 작성 → 저장 완료: 1초 이내
- AI 분석 실행 → 결과 표시: 5초 이내
- 카드 생성 → 이미지 생성: 10초 이내
- 페이지 로딩: 2초 이내

### 보안
- HTTPS 필수
- 비밀번호 암호화 (Supabase 기본)
- API 요청 인증 (JWT)
- XSS/CSRF 방어

### 사용성
- 모바일 반응형 (최우선)
- 직관적인 UI
- 최소한의 클릭
- 명확한 피드백

### 확장성
- 사용자 증가 대응 (Supabase 스케일링)
- AI API 요청 최적화 (캐싱)

---

## 10. 제약사항 & 전제조건

### 제약사항
- 개발 기간: 4주
- 개발 인력: 1-2명
- 예산: 최소화 (무료 티어 활용)
- MVP이므로 완벽하지 않아도 됨

### 전제조건
- Supabase 계정
- OpenAI API 키
- Vercel 계정
- 도메인 (선택)

### 기술적 제약
- AI 응답 시간 변동성 (5-15초)
- OpenAI API 비용 (토큰당 과금)
- 무료 티어 한도

---

## 11. 출시 기준 (Release Criteria)

### 필수 완료 항목
- [ ] 회원가입/로그인 작동
- [ ] 온보딩 5개 질문 완료
- [ ] 기록 작성/조회 정상 작동
- [ ] AI 분석 (3개 기록) 정상 작동
- [ ] 카드 생성 (5개 기록) 정상 작동
- [ ] 카드 다운로드 정상 작동
- [ ] 모바일 반응형 완료
- [ ] 주요 버그 없음

### 선택 완료 항목
- [ ] 일마카세 프롬프트 30개 준비
- [ ] 로딩 상태 UI
- [ ] 에러 처리
- [ ] 사용 가이드

---

# Part 2: 기능명세서 (Functional Specification)

## 1. 화면별 상세 명세

### 1.1 랜딩/로그인 화면

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━
[로고] 일마카세 아카이브

오늘 한 일이 
내일의 포트폴리오가 됩니다

매일 5분 기록하면
AI가 자동으로 정리해드립니다

[이메일로 시작하기]
[Google로 시작하기]

이미 계정이 있나요? [로그인]
━━━━━━━━━━━━━━━━━━━━━
```

**기능**:
- 이메일 입력 → 이메일 형식 검증
- 비밀번호 입력 → 최소 8자 검증
- Google OAuth 클릭 → 팝업 인증
- 로그인 성공 → 홈 화면 이동
- 신규 가입 → 온보딩 화면 이동

**예외 처리**:
- 이메일 형식 오류 → "올바른 이메일을 입력해주세요"
- 비밀번호 짧음 → "최소 8자 이상 입력해주세요"
- 로그인 실패 → "이메일 또는 비밀번호를 확인해주세요"
- 네트워크 오류 → "연결에 실패했습니다. 다시 시도해주세요"

---

### 1.2 온보딩 화면 (5 스텝)

**공통 요소**:
- 상단: 프로그레스 바 (1/5 ~ 5/5)
- 중앙: 질문 + 선택지
- 하단: "다음" 버튼 (선택 시 활성화)
- 뒤로가기: 이전 질문으로

**Q1: 상황 선택**:
```
━━━━━━━━━━━━━━━━━━━━━
●○○○○  (1/5)

지금 당신의 상황은?

[ ] 회사 다니는 중이에요
[ ] 취업 준비 중이에요
[ ] 프리랜서 / 사이드 프로젝트 중이에요

[다음]
━━━━━━━━━━━━━━━━━━━━━
```
- 단일 선택
- 선택 값: `situation` (working/job_seeking/freelance)

**Q2: 하는 일 입력**:
```
━━━━━━━━━━━━━━━━━━━━━
●●○○○  (2/5)

요즘 가장 자주 하는 일은 뭐예요?

[                              ]

예시: 기획, 마케팅, 개발, 운영, 
디자인, 과제, 프로젝트 등

💡 뭐라고 써도 괜찮아요

[다음]
━━━━━━━━━━━━━━━━━━━━━
```
- 자유 입력 (50자 제한)
- 선택 값: `main_work`

**Q3: 기록 이유**:
```
━━━━━━━━━━━━━━━━━━━━━
●●●○○  (3/5)

기록을 남기고 싶은 이유는?

[ ] 나중에 이직/취업할 때 쓰려고
[ ] 내가 뭘 해왔는지 정리하고 싶어서
[ ] 성장하고 있는지 알고 싶어서
[ ] 그냥 추천 받아서 / 궁금해서

[다음]
━━━━━━━━━━━━━━━━━━━━━
```
- 단일 선택
- 선택 값: `record_reason`

**Q4: 시간 선택**:
```
━━━━━━━━━━━━━━━━━━━━━
●●●●○  (4/5)

기록하는 데 얼마나 시간 쓰고 싶어요?

[ ] 하루 3분
[ ] 하루 5분
[ ] 생각날 때만

[다음]
━━━━━━━━━━━━━━━━━━━━━
```
- 단일 선택
- 선택 값: `time_preference`

**Q5: 공감 문구**:
```
━━━━━━━━━━━━━━━━━━━━━
●●●●●  (5/5)

마지막으로, 
이 문장 중 마음에 드는 건?

[ ] "나는 아직 정리되지 않았을 뿐이다"
[ ] "잘하고 있는지 확인받고 싶다"
[ ] "회사 밖에서도 통하는 사람이 되고 싶다"
[ ] "내 경험을 말로 설명하고 싶다"

[시작하기]
━━━━━━━━━━━━━━━━━━━━━
```
- 단일 선택
- 선택 값: `emotional_phrase`
- "시작하기" 클릭 → 완료 멘트 표시

**완료 멘트**:
```
━━━━━━━━━━━━━━━━━━━━━

좋아요.
완벽하게 쓸 필요 없어요.

오늘 한 일,
아무 말로라도 남겨보세요.

우리는 그걸 
'쓸 수 있는 이야기'로 바꿔줄게요.

[시작하기]
━━━━━━━━━━━━━━━━━━━━━
```
- 2초 대기 후 자동 진행 또는 클릭
- → 첫 기록 작성 화면

---

### 1.3 홈 화면

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━
[햄버거 메뉴]  일마카세 아카이브

📊 현재 상태
━━━━━━━━━━━━━━━━━━━━━
• 기록한 날: 3일
• 발견된 프로젝트: 1개
• 다음 카드까지: 기록 2개 남음

━━━━━━━━━━━━━━━━━━━━━
📝 최근 기록

[카드]
12/16 (오늘)
신규 캠페인 타겟 분석했어요...
→

[카드]
12/15
A/B 테스트 결과 정리...
→

[카드]
12/14
경쟁사 벤치마킹...
→

━━━━━━━━━━━━━━━━━━━━━

[+ 오늘 기록하기] (플로팅 버튼)
━━━━━━━━━━━━━━━━━━━━━
```

**기능**:
- 현재 상태 자동 계산
  - 기록한 날 = 고유 날짜 수
  - 발견된 프로젝트 = 생성된 카드 수
  - 다음 카드까지 = 5 - (최근 묶이지 않은 기록 수)
  
- 최근 기록 목록
  - 최신순 정렬
  - 날짜 표시 (오늘/어제/날짜)
  - 내용 미리보기 (50자)
  - 클릭 → 기록 상세

- 플로팅 버튼
  - 항상 하단 고정
  - 클릭 → 기록 작성 화면

**알림 (조건부 표시)**:
```
🎉 기록 3개 쌓였어요!
   패턴을 분석해봤어요 →

🎉 프로젝트 카드가 완성되었어요!
   확인해보세요 →
```

---

### 1.4 기록 작성 화면

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━
[←]  오늘의 일마카세

오늘 뭐 했어요?
생각난 대로 적어주세요.

[                              ]
[                              ]