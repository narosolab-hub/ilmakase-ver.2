# 일마카세 아카이브 MVP 기능명세서 v2.0

> **"업무 부담 최소화 + 꾸준한 습관 형성"**

---

## 📋 목차
1. [제품 개요](#제품-개요)
2. [핵심 컨셉](#핵심-컨셉)
3. [화면별 상세 명세](#화면별-상세-명세)
4. [데이터 모델](#데이터-모델)
5. [API 명세](#api-명세)
6. [AI 프롬프트 설계](#ai-프롬프트-설계)

---

## 제품 개요

### 한 줄 정의
**매일의 업무 기록이 커리어 자산이 되는 곳**

### 핵심 가치
- 하루 1번, 항목별로 업무 일지 작성 (최소 부담)
- 5일 누적 → AI가 자동으로 프로젝트 카드 생성 (즉각적인 보상)
- 나중에 원하는 항목만 선택해서 커스텀 카드 생성 (V1.0)

### MVP 목표
- 첫 기록 작성률: 80%
- 5일 유지율: 40%
- 첫 카드 생성율: 30%

---

## 핵심 컨셉

### 1. 항목 단위 입력폼
**문제**: 사용자가 엔터로 구분해서 작성하면 데이터 품질이 불안정  
**해결**: 동적으로 추가 가능한 개별 textarea (업무 1, 2, 3...)

```
━━━━━━━━━━━━━━━━━━━━━━━
오늘 하루 어떤 일을 했나요?
업무별로 나눠서 적어주시면
나중에 원하는 내용만 골라 쓸 수 있어요!

━━━━━━━━━━━━━━━━━━━━━━━
업무 1
┌─────────────────────────┐
│ 신규 캠페인 타겟 분석   │
└─────────────────────────┘
(10-500자)

업무 2
┌─────────────────────────┐
│ GA 데이터 보고 수정 결정│
└─────────────────────────┘

[+ 업무 추가] (최대 10개)
━━━━━━━━━━━━━━━━━━━━━━━
```

### 2. 5일 자동 카드 생성
**로직**: 복잡한 그룹핑 없이, 5개 기록 = 1개 카드 (단순 규칙)

```
Day 1-5   → 카드 1 생성
Day 6-10  → 카드 2 생성
Day 11-15 → 카드 3 생성
```

### 3. 진행도 시각화
**UI**: 5일 주기 progress bar로 명확한 목표 제시

```
┌─────────────────────────┐
│ 다음 카드까지: 2일 남음  │
│ [■■■■■■░░░░] 60%      │
│ 3일 기록 완료 · 2일 더!  │
└─────────────────────────┘
```

---

## 화면별 상세 명세

### 1.1 랜딩/로그인 화면

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━━━
[로고] 일마카세 아카이브

오늘 한 일이 
내일의 포트폴리오가 됩니다

매일 5분 기록하면
AI가 자동으로 정리해드립니다

[이메일로 시작하기]
[Google로 시작하기]

이미 계정이 있나요? [로그인]
━━━━━━━━━━━━━━━━━━━━━━━
```

**기능**:
- 이메일 입력 → 형식 검증
- 비밀번호 입력 → 최소 8자 검증
- Google OAuth 클릭 → 팝업 인증
- 로그인 성공 → 홈 화면
- 신규 가입 → 온보딩 화면

---

### 1.2 온보딩 화면 (5 스텝)

**공통 요소**:
- 상단: 프로그레스 바 (1/5 ~ 5/5)
- 중앙: 질문 + 선택지
- 하단: "다음" 버튼
- 뒤로가기: 이전 질문으로

**Q1-Q5**: 기존과 동일 (situation, main_work, record_reason, time_preference, emotional_phrase)

---

### 1.3 홈 화면 (핵심 변경)

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━━━
일마카세 아카이브        [⚙️]
안녕하세요, 준이님! 👋

━━━━━━━━━━━━━━━━━━━━━━━
🎉 프로젝트 카드가 완성되었어요!
준이님의 업무 기록을 바탕으로
포트폴리오 카드를 생성할 수 있어요
[카드 만들기 →]
━━━━━━━━━━━━━━━━━━━━━━━

📊 현재 상태
━━━━━━━━━━━━━━━━━━━━━━━
다음 카드까지: 2일 남음
[■■■■■■░░░░] 60%
3일 기록 완료 · 2일 더 작성하면 카드 생성!

┌─────┬─────┬─────┐
│  8  │  2  │  3  │
│기록한│완성 │대기 │
│ 날  │카드 │중   │
└─────┴─────┴─────┘
━━━━━━━━━━━━━━━━━━━━━━━

📝 최근 기록
┌─────────────────────┐
│ 오늘                │
│ 신규 캠페인...      │
│ 외 2개        →     │
└─────────────────────┘
...

[+ 오늘 기록하기] (플로팅 버튼)
━━━━━━━━━━━━━━━━━━━━━━━
```

**알림 조건**:
- **3일 쌓임**: "패턴을 분석해볼까요?" → AI 분석 화면
- **5일 쌓임**: "프로젝트 카드가 완성되었어요!" → 카드 생성 화면

---

### 1.4 기록 작성 화면 (핵심 변경)

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━━━
[←]  오늘의 업무 일지     3/3개 작성

오늘 하루 어떤 일을 했나요?
업무별로 나눠서 적어주시면
나중에 원하는 내용만 골라 쓸 수 있어요!

━━━━━━━━━━━━━━━━━━━━━━━
💡 일마카세 프롬프트 ▼
오늘 당신이 내린
가장 중요한 '결정'은 무엇이었나요?
━━━━━━━━━━━━━━━━━━━━━━━

업무 1                    [삭제]
┌─────────────────────────┐
│ 신규 캠페인 타겟 분석   │
│                         │
└─────────────────────────┘
50/500자

업무 2                    [삭제]
┌─────────────────────────┐
│ GA 데이터 보고 수정 결정│
└─────────────────────────┘

업무 3                    [삭제]
┌─────────────────────────┐
│                         │
└─────────────────────────┘

[+ 업무 추가] (최대 10개)

━━━━━━━━━━━━━━━━━━━━━━━
[나중에]  [저장하기]
━━━━━━━━━━━━━━━━━━━━━━━
```

**기능**:
- 동적 추가 가능한 업무 항목 (최대 10개)
- 각 항목당 10-500자
- 하루 1회 작성 제한 (오늘 이미 작성 시 알림)
- 저장 → AI 즉시 미리보기 → 미리보기 화면

---

### 1.5 기록 저장 후 즉시 미리보기

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━━━
✅ 기록되었습니다!
💡 이 기록은 이렇게 쓸 수 있어요 👇

━━━━━━━━━━━━━━━━━━━━━━━
🗂️ 데이터 기반 타겟 재설정

💼 내가 한 일:
• GA 데이터 분석을 통해
  기존 타겟 가정 재검증
• 데이터 인사이트 바탕으로
  타겟 연령대 조정 결정

🧠 사고 방식:
"예상과 다른 데이터를 발견했을 때,
즉시 가정을 재검토하고 방향을
수정하는 유연한 접근"
━━━━━━━━━━━━━━━━━━━━━━━
💬 기록 몇 개만 더 쌓이면
완성된 프로젝트 카드를 만들어드릴게요!

[계속 기록하기] [홈으로]
━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 1.6 기록 상세 화면 (핵심 변경)

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━━━
[←]  기록 상세            [🗑️ 삭제]

📅 2024년 12월 16일 (월)  [카드 생성됨]

━━━━━━━━━━━━━━━━━━━━━━━
📝 오늘의 업무 (3개)

┌─────────────────────────┐
│ ① 신규 캠페인 타겟 분석 │
└─────────────────────────┘

┌─────────────────────────┐
│ ② GA 데이터 보고 수정   │
│    결정                 │
└─────────────────────────┘

┌─────────────────────────┐
│ ③ 팀 회의에서 방향 설명 │
└─────────────────────────┘

━━━━━━━━━━━━━━━━━━━━━━━
💡 곧 출시!
원하는 업무 항목만 체크해서
커스텀 카드를 만들 수 있는 기능이
곧 추가됩니다.
━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 1.7 AI 분석 결과 화면 (3일)

**트리거**: 기록 3개 쌓임 (홈 화면 알림 클릭)

**화면 구성**:
```
━━━━━━━━━━━━━━━━━━━━━━━
[←]  AI 분석
📊 지금까지 이런 일을 해오셨어요

━━━━━━━━━━━━━━━━━━━━━━━
✨ 패턴 발견
신규 캠페인 관련 업무가
반복적으로 기록되고 있어요.

━━━━━━━━━━━━━━━━━━━━━━━
📈 업무 흐름
데이터 분석 → 가설 설정 → 테스트 → 수정
이런 순서로 진행하시는 것 같아요.

━━━━━━━━━━━━━━━━━━━━━━━
🏷️ 자주 등장하는 키워드
#타겟분석 #전환율 #AB테스트
#데이터 #가설

━━━━━━━━━━━━━━━━━━━━━━━
💡 인사이트
데이터를 기반으로 의사결정하는
스타일이네요!

━━━━━━━━━━━━━━━━━━━━━━━
💬 기록을 조금 더 쌓으면
완성된 프로젝트 카드를 만들어드릴게요!

[확인]
━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 1.8 프로젝트 카드 화면 (5일)

**트리거**: 기록 5개 쌓임 (홈 화면 알림 → 카드 생성 화면)

**카드 생성 화면**:
```
━━━━━━━━━━━━━━━━━━━━━━━
         🎨
프로젝트 카드를 만들고 있어요

AI가 여러분의 5일간의 업무 기록을
분석하여 하나의 완성된 포트폴리오
카드로 만들고 있습니다.

[⏳ 로딩 중... (약 10초)]

[카드 생성하기 🚀]
[나중에 하기]
━━━━━━━━━━━━━━━━━━━━━━━
```

**카드 상세 화면**:
```
━━━━━━━━━━━━━━━━━━━━━━━
[←]  프로젝트 카드

📁 신규 마케팅 캠페인 기획
⏱️ 2024.12.01 ~ 12.05 (5일)

💼 내가 한 일
• 타겟 분석을 통해 주요 고객군 정의
• 데이터 기반으로 메시지 A/B 테스트
• 테스트 결과 바탕 최종 메시지 선정

📊 결과
• 전환율 약 15% 개선

🧠 사고 방식
"데이터를 기준으로 가설을 세우고,
검증을 통해 방향을 좁혀가는
방식으로 일했습니다."

━━━━━━━━━━━━━━━━━━━━━━━
[카드 다운로드 (PNG)]
[더 많이 기록하기]
━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 데이터 모델

### Record (핵심 변경)
```typescript
{
  id: string (UUID)
  user_id: string (FK)
  contents: string[]  // 변경: 항목 단위 배열
  date: date
  created_at: timestamp
  keywords?: string[]
  project_id?: string  // 연결된 카드 ID
}
```

**예시**:
```json
{
  "id": "uuid",
  "date": "2024-12-16",
  "contents": [
    "신규 캠페인 타겟 분석",
    "GA 데이터 보고 수정 결정",
    "팀 회의에서 방향 설명"
  ]
}
```

### 나머지 모델 (변경 없음)
- User
- AIAnalysis
- ProjectCard

---

## API 명세

### POST /api/records (핵심 변경)
**Request**:
```json
{
  "contents": [
    "신규 캠페인 타겟 분석",
    "GA 데이터 보고 수정 결정"
  ],
  "date": "2024-12-16"
}
```

**Response**:
```json
{
  "record": { ... },
  "preview": {
    "title": "데이터 기반 타겟 재설정",
    "actions": [...],
    "thinking": "..."
  }
}
```

**검증**:
- 최소 1개 항목 필수
- 각 항목 10-500자
- 하루 1회 작성 제한

### POST /api/cards/generate (단순화)
**로직**:
1. `project_id`가 null인 기록 5개 조회 (날짜 오름차순)
2. AI로 프로젝트 카드 생성 (프롬프트 3 사용)
3. 카드 DB 저장 + 기록들의 `project_id` 업데이트

---

## AI 프롬프트 설계

### 프롬프트 1: 즉시 미리보기 (변경)
**Input**: `contents: string[]`
```
오늘 작성한 업무 일지를 분석하여 포트폴리오 형식으로 변환해주세요:

1. 신규 캠페인 타겟 분석
2. GA 데이터 보고 수정 결정

→ { "title", "actions", "thinking" }
```

### 프롬프트 2: AI 분석 (변경)
**Input**: `records: Array<{ date, contents: string[] }>`
```
다음 3일간의 업무 일지를 분석해주세요:

[1일차] 2024-12-16
  1. 신규 캠페인 타겟 분석
  2. GA 데이터 보고 수정 결정

→ { "pattern", "workflow", "keywords", "insight" }
```

### 프롬프트 3: 프로젝트 카드 생성 (핵심 변경)
**Input**: `records: Array<{ date, contents: string[] }>`

**System Prompt**:
```
당신은 포트폴리오 작성 전문가입니다.
사용자가 5일(일주일) 동안 작성한 업무 일지를 분석하여,
하나의 일관된 '미니 프로젝트'로 묶고 포트폴리오 카드를 생성해주세요.

<중요>
- 사용자의 입력은 제목이나 프로젝트명이 없는 '단순 업무 일지'입니다.
- 이 5일간의 업무 기록에서 '주제'를 도출하고 프로젝트화 해야 합니다.
- "어떻게 생각했는지"를 강조하여 사용자의 사고 과정이 돋보이도록 해주세요.
</중요>
```

**User Prompt**:
```
다음 5일간의 업무 일지를 분석하여, 하나의 프로젝트로 묶어 포트폴리오 카드를 생성해주세요:

[1일차] 2024-12-01
  1. 신규 캠페인 타겟 분석
  2. GA 데이터 수집

[2일차] 2024-12-02
  1. 데이터 분석 보고서 작성
  2. 가설 설정

...

<규칙>
1. title: 이 5일간의 기록을 가장 잘 나타내는 '프로젝트 제목'을 6~12단어로 생성.
2. tasks: 5일간의 기록에서 핵심적인 '행동' 3가지를 도출 (수행 역할 강조).
3. results: 달성한 성과나 결과를 1-2개 도출 (없다면 빈 배열).
4. thinking_summary: 5일 동안 이어진 업무 흐름에서 발견되는 '사고 방식'을 30~50단어로 요약.
</규칙>

→ { "title", "tasks", "results", "thinking_summary" }
```

---

## 향후 확장 (V1.0 / V2.0)

### V1.0: 큐레이션 기능
- **라인별 선택 카드 생성**
  - 기록 상세 화면에서 특정 항목 체크
  - 선택된 항목만으로 커스텀 카드 생성
  
```
D-5 기록 상세
☑️ 업무 1: 신규 캠페인...
☐ 업무 2: ...
☑️ 업무 3: ...

선택된 항목 (2개)
[선택한 업무로 카드 만들기]
```

### V2.0: 월간 리포트
- **월 단위 종합 분석**
  - 20-25일의 기록 전체 분석
  - 월간 핵심 목표 달성
  - 능력치별 요약
  - 다음 달 계획 제안

---

## 마무리

이 기능명세서는 **"업무 부담 최소화 + 꾸준한 습관 형성"**이라는 핵심 가치를 중심으로 설계되었습니다.

**핵심 변경 사항**:
1. ✅ 항목 단위 입력폼 (데이터 품질 향상)
2. ✅ 5일 자동 카드 생성 (단순 명확한 규칙)
3. ✅ 진행도 시각화 (명확한 목표 제시)
4. ✅ 하루 1회 작성 제한 (부담 최소화)

이 설계는 MVP에서 핵심 가치를 검증하고, V1.0/V2.0에서 유료 기능으로 확장할 수 있는 견고한 기반을 제공합니다.

