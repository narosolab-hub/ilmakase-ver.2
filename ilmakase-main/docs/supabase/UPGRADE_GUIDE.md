# Supabase 업그레이드 가이드

## 📊 현재 상태 확인

1. **Supabase 대시보드 접속**
   - https://supabase.com/dashboard
   - 프로젝트 선택 → Settings → Usage

2. **사용량 확인**
   - Database Size: 현재 사용 중인 용량
   - Bandwidth: 월간 대역폭 사용량

3. **SQL Editor에서 상세 확인**
   - `check-db-size.sql` 파일의 쿼리 실행

## ⚠️ 업그레이드 필요 시점

### 무료 플랜 (Free)
- ✅ 데이터베이스: 500MB
- ✅ 대역폭: 월 5GB
- ✅ API 요청: 무제한

### Pro 플랜 ($25/월)
- ✅ 데이터베이스: 8GB (+ 초과 시 GB당 $0.125)
- ✅ 대역폭: 월 50GB (+ 초과 시 GB당 $0.09)
- ✅ 더 나은 성능 및 지원

## 🚀 업그레이드 방법

1. **Supabase 대시보드 접속**
   - 프로젝트 선택
   - Settings → Billing

2. **Pro 플랜 선택**
   - 월 $25 (연간 결제 시 할인 가능)

3. **자동 마이그레이션**
   - 데이터 손실 없이 자동 업그레이드
   - 다운타임 없음

## 💡 데이터 최적화 (업그레이드 전 시도)

### 1. 오래된 데이터 정리
```sql
-- 1년 이상 된 기록 중 포트폴리오에 연결되지 않은 것 삭제
DELETE FROM records 
WHERE date < CURRENT_DATE - INTERVAL '1 year'
AND project_id IS NULL
AND analysis_id IS NULL;
```

### 2. 불필요한 데이터 정리
- 테스트 데이터 삭제
- 중복 데이터 확인 및 정리

### 3. 인덱스 최적화
```sql
VACUUM ANALYZE;
```

## 📈 예상 데이터 사용량

### 일반적인 사용자 (월 20일 기록 기준)
- **records**: 약 20개 × 5KB = 100KB/월
- **ai_analyses**: 약 4개 × 10KB = 40KB/월  
- **project_cards**: 약 1개 × 15KB = 15KB/월
- **총합**: 약 155KB/월/사용자

### 500MB 제한 기준
- 약 **3,200명의 활성 사용자**까지 가능
- 실제로는 인덱스, 메타데이터 등으로 더 적을 수 있음

## 🔍 모니터링

정기적으로 다음을 확인하세요:
1. Database Size 추이
2. Bandwidth 사용량
3. 활성 사용자 수
4. 평균 기록 크기

## ⚡ 성능 최적화 팁

1. **인덱스 활용**: 이미 설정된 인덱스 확인
2. **페이지네이션**: 대량 데이터 조회 시 필수
3. **캐싱**: 자주 조회되는 데이터는 캐싱 고려
4. **데이터 아카이빙**: 오래된 데이터는 별도 저장소로 이동

